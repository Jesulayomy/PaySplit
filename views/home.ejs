<!DOCTYPE html>
<html>
<%- include('chunks/head') -%>
<body>
  <%- include('chunks/navbar') -%>

  <div class="container-fluid p-5 pt-0">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h1>Your Contributions</h1>
      <a href="/contributions/new" class="btn btn-outline-primary btn-lg rounded-pill shadow-sm"><i class="fa fa-group"></i> Create Pool</a>
    </div>

		<div class="row p-3">
			<% contributions.forEach((contribution, index) => { %>
			<%
				const isInvitePending = contribution.invites.some(invite => invite.user._id.toString() === user._id.toString());
			%>
			<% if (isInvitePending) { %>
			<a href="/contributions/<%= contribution._id %>" class="btn text-start p-0 m-0 mb-4 rounded-5 border-warning shadow-sm">
			<% } else { %>
			<a href="/contributions/<%= contribution._id %>" class="btn text-start p-0 m-0 mb-4 rounded-5 border-none shadow-sm">
			<% } %>
				<div class="card p-0 rounded-5 border border-0 h-100">
					<div class="row g-0 h-100">
						<div class="col-md-8 p-4 d-flex flex-column">
							<div class="card-body pt-1 p-2 d-flex flex-column h-100">
								<h3 class="card-title fw-bold"><%= contribution.name %></h3>
								<p class="card-text fw-bold mt-auto <%= contribution.completed ? 'text-success' : '' %>">$<%= (contribution.total - contribution.remainder).toFixed(2) %> / $<%= contribution.total.toFixed(2) %></p>
							</div>
						</div>
						<div class="col-md-4">
							<div class="img-fluid rounded-end-5" style="background-image: url('/img/<%= index % 3 %>.png'); background-size: cover; background-position: center; height: 200px; width: 100%;" alt="<%= contribution.name %>"></div>
						</div>
					</div>
				</div>
			</a>
			<% }) %>
		</div>
  </div>
<%- include('chunks/footer') -%>